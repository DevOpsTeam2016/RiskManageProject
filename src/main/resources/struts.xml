<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
        "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>

    <constant name="struts.action.excludePattern" value="/static/.*?" /><!--允许访问资源文件-->

    <package name="test" namespace="/" extends="struts-default">
        <action name="test" class="TestAction" method="execute">
            <result name="success">/templates/test/success.jsp</result>
            <result name="fail">/templates/test/fail.jsp</result>
        </action>
    </package>

    <package name="default" namespace="/" extends="struts-default">
        <action name="login" class="LoginAction" method="login">
            <result name="login">/templates/login/login.jsp</result>
            <result name="error" type="redirect">/login</result>
            <result name="manager" type="redirect">/manager/index</result>
            <result name="developer" type="redirect">/developer/index</result>
        </action>
    </package>
    
    <package name="developer" namespace="/developer" extends="struts-default">
        <interceptors>
            <interceptor name="DeveloperInterceptor" class="com.devopsteam.interceptor.DeveloperInterceptor"/>
            <interceptor-stack name="DeveloperStack">
                <interceptor-ref name="defaultStack"/>
                <interceptor-ref name="DeveloperInterceptor"/>
            </interceptor-stack>
        </interceptors>
        <global-results>
            <result name="403">/templates/login/403.jsp</result>
        </global-results>
        <action name="index" class="DeveloperAction" method="index">
            <result name="index">/templates/developer/index.jsp</result>
        </action>
        <action name="create_project" class="DeveloperAction" method="createProject">
            <result name="success" type="redirect">/developer/index</result>
        </action>
    </package>

    <package name="manager" namespace="/manager" extends="struts-default">
        <interceptors>
            <interceptor name="ManagerInterceptor" class="com.devopsteam.interceptor.ManagerInterceptor"/>
            <interceptor-stack name="DeveloperStack">
                <interceptor-ref name="defaultStack"/>
                <interceptor-ref name="ManagerInterceptor"/>
            </interceptor-stack>
        </interceptors>
        <global-results>
            <result name="403">/templates/login/403.jsp</result>
        </global-results>
    </package>

</struts>